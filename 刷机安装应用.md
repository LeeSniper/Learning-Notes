# 刷机安装 MIUIHomeGlobal 教程


## 刷机
打包 ROM，下载，然后解压

adb devices 链接手机

如果没有安装 adb，通过 sudo apt install anddroid-tools-adb 安装

adb reboot bootloader 重启手机

进入到解压后的 ROM 文件夹下，执行 flash_all.sh

需要安装 fastboot，如果没有安装，通过 sudo apt install android-tools-fastboot 或者 sudo apt install fastboot 安装

sudo fastboot -l devices 检查设备链接

sudo ./flash_all.sh 开始刷机

## 安装 MIUIHomeGlobal

需要使用 adb push 将 build 好的 apk 传到手机上，存储的目录在 system/priv-app/

./gradlew assembleDebug 打包

adb push  PocoLauncher/build/outputs/apk/debug/PocoLauncher-universal-debug.apk /system/priv-app/MiuiHome/MiuiHome.apk

提示：
failed to copy 'build/outputs/apk/MiuiHomeGlobal-universal-debug.apk' to '/system/priv-app//MiuiHomeGlobal-universal-debug.apk': couldn't create file: Read-only file system

因为读写权限问题，是只读文件。修改读写权限

adb reboot 	重启

adb root

adb disable-verity

adb remount

再次执行 adb push  PocoLauncher/build/outputs/apk/debug/PocoLauncher-universal-debug.apk /system/priv-app/MiuiHome/MiuiHome.apk 把文件复制到手机上

如果还是报错，则执行

进入 adb shell

mount 查看文件权限

mount -o rw,remount /system 修改读写权限

adb reboot 	重启

adb root 

adb remount

adb push PocoLauncher/build/outputs/apk/debug/PocoLauncher-universal-debug.apk /system/priv-app/MiuiHome/MiuiHome.apk

adb shell am force-stop com.miui.home

push 成功之后运行 adb reboot 重启就可以了

## 安装覆盖

adb install -r PocoLauncher/build/outputs/apk/debug/PocoLauncher-universal-debug.apk

如果安装失败，提示 [INSTALL_FAILED_VERSION_DOWNGRADE]

adb install -r -d PocoLauncher/build/outputs/apk/debug/PocoLauncher-universal-debug.apk
